<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>playground</title>
</head>
<body>

<script src="struct.js"></script>
<script>

    ~function () {
        function countTime(handle, name) {
            let timeStart = new Date();
            handle();
            let timeEnd = new Date();
            console.log(`time ${name} sub: ${(timeEnd - timeStart)}`);
        }
    }();

    ~function () {

        var longestPalindrome = function (s) {
            function DecArray(x, y) {
                let vector = [];
                for (let i = 0; i < x; i++)
                    vector[i] = new Array(y).fill(0);
                return vector;
            }

            let ori = s;
            let res = Array.prototype.slice.call(s).reverse().join('');
            let len = s.length;
            let vector = new DecArray(len, len);
            let max = 0;
            let end = 0;

            for (let i = 0; i < len; i++) {
                for (let j = 0; j < len; j++) {
                    if (ori[i] === res[j]) {
                        if (i === 0 || j === 0) {
                            vector[i][j] = 1;
                        } else {
                            vector[i][j] = vector[i - 1][j - 1] + 1;
                        }
                    }

                    if (vector[i][j] > max) {
                        max = vector[i][j];
                        end = i;
                    }
                }
                console.log(vector.join('\n'));
            }

            console.log(vector);

            return s.substring(end - max + 1, max);
        };

        var combine = function (n, k) {
            //回溯 动态分配
            if (!n || !k) return [];

            function dp(min, max, num) {
                let remain = max - num + 1;
                for (; min <= remain; min++) {
                    cache.push(min);
                    if (num > 1) {
                        dp(min + 1, max, num - 1);
                    } else {
                        result.push(cache.slice(0));
                    }
                    cache.pop();
                }
            }

            let cache = [];
            let result = [];
            dp(1, n, k);
            return result;
        };

        const combinationSum = (candidates, target) => {
            const res = [];
            const cache = [];
            const dfs = (sum, start) => {
                if (sum >= target) {
                    if (sum === target) {
                        res.push(cache.slice());
                    }
                    return;
                }
                for (let i = start; i < candidates.length; i++) {
                    cache.push(candidates[i]);
                    dfs(sum + candidates[i], i);
                    cache.pop();
                }
            };
            dfs(0, 0);
            return res;
        };

const combinationSum2 = (candidates, target) => {
    candidates.sort();
    const res = [];
    const cache = [];
    const dfs = (sum, start) => {
        if (sum >= target) {
            if (sum === target) {
                res.push(cache.slice());
            }
            return;
        }
        for (let i = start; i < candidates.length; i++) {
            if (candidates[i - 1] === candidates[i] && i - 1 >= start) {
                continue;
            }
            cache.push(candidates[i]);
            dfs(sum + candidates[i], i + 1);
            cache.pop();
        }
    };

    dfs(0, 0);
    return res;
};

        // 1 3 3 6 6 6 6
        // 0 1 1 2 2 2 2 3 3 3 3 3 3 3 3


        let result = combinationSum2([10, 1, 2, 7, 6, 1, 5], 8);

        console.log(result);

    }();

</script>
</body>
</html>