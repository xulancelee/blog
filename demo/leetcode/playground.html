<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>playground</title>
</head>
<body>

<script src="struct.js"></script>
<script>

    ~function () {
        function countTime(handle, name) {
            let timeStart = new Date();
            handle();
            let timeEnd = new Date();
            console.log(`time ${name} sub: ${(timeEnd - timeStart)}`);
        }
    }();

    ~function () {

        var longestPalindrome = function (s) {
            function DecArray(x, y) {
                let vector = [];
                for (let i = 0; i < x; i++)
                    vector[i] = new Array(y).fill(0);
                return vector;
            }

            let ori = s;
            let res = Array.prototype.slice.call(s).reverse().join('');
            let len = s.length;
            let vector = new DecArray(len, len);
            let max = 0;
            let end = 0;

            for (let i = 0; i < len; i++) {
                for (let j = 0; j < len; j++) {
                    if (ori[i] === res[j]) {
                        if (i === 0 || j === 0) {
                            vector[i][j] = 1;
                        } else {
                            vector[i][j] = vector[i - 1][j - 1] + 1;
                        }
                    }

                    if (vector[i][j] > max) {
                        max = vector[i][j];
                        end = i;
                    }
                }
                console.log(vector.join('\n'));
            }

            console.log(vector);

            return s.substring(end - max + 1, max);
        };

var solveNQueens = function(n) {
    function build(ans) {
        let len = ans.length;
        let si = [];
        for (let i = 0; i < ans.length; i++) {
            let row = new Array(len).fill('.');
            row[ans[i]] = 'Q';
            si.push(row.join(''));
        }
        result.push(si);
    }

    function lock(row, col) {
        for (let i = 0; i < row; i++) {
            if(col === cache[i]) return false;
            if(col + row - i === cache[i]) return false;
            if(col - row + i === cache[i]) return false;
        }
        return true;
    }

    function search(row) {
        for (let i = 0; i < n; i++) {
            if(lock(row, i)) {
                cache[row] = i;
                if(row === n - 1) {
                    build(cache);
                } else search(row + 1);
            }
        }
        return false;
    }

    if(n === 1) return [["Q"]];
    if(n <= 3) return [];

    let result = [];
    let cache = new Array(n);

    search(0);

    return result;
};

        let r0 = [1, 3, 5, 2, 4];
        let r1 = [1, 4, 2, 5, 3];
        let r2 = [2, 4, 1, 3, 5];
        let r3 = [2, 5, 3, 1, 4];
        let r4 = [3, 1, 5, 2, 4];
        let r5 = [3, 5, 1, 4, 2];
        let r6 = [4, 1, 3, 5, 2];
        let r7 = [4, 2, 5, 3, 1];
        let r8 = [5, 3, 1, 4, 2];
        let r9 = [5, 2, 4, 1, 3];

        let s0 = [
            [0, 2, 0, 0, 0, 0],
            [0, 0, 0, 0, 5, 0],
            [0, 0, 3, 0, 0, 0],
            [1, 0, 0, 0, 0, 0],
            [0, 0, 0, 4, 0, 0],
            [0, 0, 0, 0, 0, 6],
        ]

        let result = solveNQueens(4);

        console.log(result);

    }();

</script>
</body>
</html>